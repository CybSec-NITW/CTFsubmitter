digraph threads{
	rankdir=LR
	node[shape=rarrow]
	RawFlags,SubmittedFlagsDB,FlagsDB,FilteredFlag,ArrowsAreChannels
	node[shape=Mcircle]
	DB
	node[shape=invhouse]
	iCTFServers
	node[shape=box]
	SquaresAreThreads
	flagsFilter -> FlagsDB:w 
	flagsFilter -> FilteredFlag:w
	DBHandler -> DB
	SubmittersPool -> iCTFServers:n
	iCTFServers:n -> SubmittersPool
	SubmittersPool ->  SubmittedFlagsDB:w
	subgraph clusterInputStuff{
		label="inputStuff"
		attackersRest -> restServer
		attackersSocket -> socketServer
		restServer -> RawFlags:w
		socketServer -> RawFlags:w
	}
	subgraph clusterLegend{
	label="legend"
		SquaresAreThreads -> ArrowsAreChannels [style=invis]
	}

	RawFlags:e -> flagsFilter
	FilteredFlag:e-> SubmittersPool 
	FlagsDB:e-> DBHandler
	SubmittedFlagsDB:e-> DBHandler
}
